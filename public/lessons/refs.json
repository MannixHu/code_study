{
  "categoryId": "refs",
  "name": "Refs å¼•ç”¨",
  "description": "å­¦ä¹  useRef è®¿é—® DOM å’Œä¿å­˜å€¼",
  "icon": "ğŸ”—",
  "order": 10,
  "lessons": [
    {
      "id": "refs-1",
      "title": "useRef åŸºç¡€",
      "difficulty": "easy",
      "tags": ["useRef", "DOM"],
      "estimatedTime": 5,
      "question": "ä½¿ç”¨ useRef è·å–è¾“å…¥æ¡†å¹¶è®©å®ƒè‡ªåŠ¨èšç„¦",
      "description": "useRef è¿”å›å¯å˜çš„ ref å¯¹è±¡ï¼Œç”¨äºè®¿é—® DOM å…ƒç´ ã€‚",
      "starterCode": "function App() {\n  // åˆ›å»º ref\n\n  useEffect(() => {\n    // è®©è¾“å…¥æ¡†èšç„¦\n  }, [])\n\n  return <input /* ç»‘å®š ref */ />\n}\n\nrender(<App />)",
      "solution": "function App() {\n  const inputRef = useRef(null)\n\n  useEffect(() => {\n    inputRef.current.focus()\n  }, [])\n\n  return <input ref={inputRef} />\n}\n\nrender(<App />)",
      "hints": [
        "const inputRef = useRef(null)",
        "ref={inputRef} ç»‘å®šåˆ°å…ƒç´ ",
        "inputRef.current.focus() è°ƒç”¨æ–¹æ³•"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥ä½¿ç”¨ useRef",
          "pattern": "useRef"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ç»‘å®š ref",
          "pattern": "ref="
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥è®¿é—® current",
          "pattern": "\\.current"
        }
      ]
    },
    {
      "id": "refs-2",
      "title": "æ“ä½œ DOM",
      "difficulty": "medium",
      "tags": ["useRef", "DOM"],
      "estimatedTime": 6,
      "question": "ç‚¹å‡»æŒ‰é’®æ¸…ç©ºè¾“å…¥æ¡†",
      "description": "é€šè¿‡ ref ç›´æ¥æ“ä½œ DOM å…ƒç´ ã€‚",
      "starterCode": "function App() {\n  const inputRef = useRef(null)\n\n  const handleClear = () => {\n    // æ¸…ç©ºè¾“å…¥æ¡†çš„å€¼\n  }\n\n  return (\n    <div>\n      <input ref={inputRef} defaultValue=\"æµ‹è¯•æ–‡æœ¬\" />\n      <button onClick={handleClear}>æ¸…ç©º</button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function App() {\n  const inputRef = useRef(null)\n\n  const handleClear = () => {\n    inputRef.current.value = ''\n  }\n\n  return (\n    <div>\n      <input ref={inputRef} defaultValue=\"æµ‹è¯•æ–‡æœ¬\" />\n      <button onClick={handleClear}>æ¸…ç©º</button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "inputRef.current.value = ''",
        "é€šè¿‡ ref ç›´æ¥ä¿®æ”¹ DOM",
        "ä¸éœ€è¦ state"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥è®¿é—® current.value",
          "pattern": "\\.current\\.value"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥æœ‰ useRef",
          "pattern": "useRef"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥æœ‰ handleClear",
          "pattern": "handleClear"
        }
      ]
    },
    {
      "id": "refs-3",
      "title": "ä¿å­˜ä¸è§¦å‘æ¸²æŸ“çš„å€¼",
      "difficulty": "medium",
      "tags": ["useRef", "å˜é‡"],
      "estimatedTime": 7,
      "question": "ä½¿ç”¨ ref ä¿å­˜å®šæ—¶å™¨ ID",
      "description": "ref å¯ä»¥ä¿å­˜ä»»æ„å€¼ï¼Œä¸”ä¿®æ”¹ä¸ä¼šè§¦å‘æ¸²æŸ“ã€‚",
      "starterCode": "function App() {\n  const [count, setCount] = useState(0)\n  // ç”¨ ref ä¿å­˜å®šæ—¶å™¨ ID\n\n  const start = () => {\n    // å¯åŠ¨å®šæ—¶å™¨ï¼Œæ¯ç§’ +1\n    // ä¿å­˜å®šæ—¶å™¨ ID\n  }\n\n  const stop = () => {\n    // æ¸…é™¤å®šæ—¶å™¨\n  }\n\n  return (\n    <div>\n      <p>è®¡æ•°: {count}</p>\n      <button onClick={start}>å¼€å§‹</button>\n      <button onClick={stop}>åœæ­¢</button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function App() {\n  const [count, setCount] = useState(0)\n  const timerRef = useRef(null)\n\n  const start = () => {\n    timerRef.current = setInterval(() => {\n      setCount(c => c + 1)\n    }, 1000)\n  }\n\n  const stop = () => {\n    clearInterval(timerRef.current)\n  }\n\n  return (\n    <div>\n      <p>è®¡æ•°: {count}</p>\n      <button onClick={start}>å¼€å§‹</button>\n      <button onClick={stop}>åœæ­¢</button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "timerRef.current = setInterval(...)",
        "clearInterval(timerRef.current)",
        "ref ä¿å­˜å€¼ä¸è§¦å‘æ¸²æŸ“"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥ä½¿ç”¨ useRef",
          "pattern": "useRef"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ä¿å­˜åˆ° ref.current",
          "pattern": "\\.current\\s*=\\s*setInterval"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥æ¸…é™¤å®šæ—¶å™¨",
          "pattern": "clearInterval"
        }
      ]
    },
    {
      "id": "refs-4",
      "title": "è·å–å‰ä¸€æ¬¡çš„å€¼",
      "difficulty": "hard",
      "tags": ["useRef", "è‡ªå®šä¹‰Hook"],
      "estimatedTime": 8,
      "question": "ä½¿ç”¨ ref ä¿å­˜ count çš„å‰ä¸€ä¸ªå€¼",
      "description": "ref åœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒä¸å˜ï¼Œå¯ä»¥ç”¨æ¥ä¿å­˜ä¹‹å‰çš„çŠ¶æ€ã€‚",
      "starterCode": "function App() {\n  const [count, setCount] = useState(0)\n  const prevCountRef = useRef()\n\n  useEffect(() => {\n    // åœ¨ effect ä¸­æ›´æ–°å‰ä¸€ä¸ªå€¼\n  })\n\n  const prevCount = prevCountRef.current\n\n  return (\n    <div>\n      <p>å½“å‰: {count}</p>\n      <p>ä¹‹å‰: {prevCount}</p>\n      <button onClick={() => setCount(count + 1)}>å¢åŠ </button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function App() {\n  const [count, setCount] = useState(0)\n  const prevCountRef = useRef()\n\n  useEffect(() => {\n    prevCountRef.current = count\n  })\n\n  const prevCount = prevCountRef.current\n\n  return (\n    <div>\n      <p>å½“å‰: {count}</p>\n      <p>ä¹‹å‰: {prevCount}</p>\n      <button onClick={() => setCount(count + 1)}>å¢åŠ </button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "åœ¨ useEffect ä¸­æ›´æ–° ref",
        "ä¸ä¼ ä¾èµ–æ•°ç»„ï¼Œæ¯æ¬¡æ¸²æŸ“åæ‰§è¡Œ",
        "prevCountRef.current = count"
      ],
      "testCases": [
        {
          "type": "ast",
          "description": "åº”è¯¥ä½¿ç”¨ useEffect",
          "checker": "usesUseEffect"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥æ›´æ–° ref.current",
          "pattern": "\\.current\\s*=\\s*count"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ä½¿ç”¨ useRef",
          "pattern": "useRef"
        }
      ]
    },
    {
      "id": "refs-5",
      "title": "æ»šåŠ¨åˆ°å…ƒç´ ",
      "difficulty": "medium",
      "tags": ["useRef", "DOM"],
      "estimatedTime": 6,
      "question": "ç‚¹å‡»æŒ‰é’®æ»šåŠ¨åˆ°åº•éƒ¨",
      "description": "ä½¿ç”¨ ref è°ƒç”¨ DOM æ–¹æ³•å®ç°æ»šåŠ¨ã€‚",
      "starterCode": "function App() {\n  const bottomRef = useRef(null)\n\n  const scrollToBottom = () => {\n    // æ»šåŠ¨åˆ° bottomRef æ‰€åœ¨ä½ç½®\n  }\n\n  return (\n    <div>\n      <button onClick={scrollToBottom}>æ»šåŠ¨åˆ°åº•éƒ¨</button>\n      <div style={{ height: '200px', overflow: 'auto' }}>\n        <p>å†…å®¹1</p>\n        <p>å†…å®¹2</p>\n        <p>å†…å®¹3</p>\n        <p>å†…å®¹4</p>\n        <p>å†…å®¹5</p>\n        <div ref={bottomRef}>åº•éƒ¨</div>\n      </div>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function App() {\n  const bottomRef = useRef(null)\n\n  const scrollToBottom = () => {\n    bottomRef.current.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  return (\n    <div>\n      <button onClick={scrollToBottom}>æ»šåŠ¨åˆ°åº•éƒ¨</button>\n      <div style={{ height: '200px', overflow: 'auto' }}>\n        <p>å†…å®¹1</p>\n        <p>å†…å®¹2</p>\n        <p>å†…å®¹3</p>\n        <p>å†…å®¹4</p>\n        <p>å†…å®¹5</p>\n        <div ref={bottomRef}>åº•éƒ¨</div>\n      </div>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "scrollIntoView() æ–¹æ³•",
        "{ behavior: 'smooth' } å¹³æ»‘æ»šåŠ¨",
        "bottomRef.current.scrollIntoView(...)"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥è°ƒç”¨ scrollIntoView",
          "pattern": "scrollIntoView"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ä½¿ç”¨ useRef",
          "pattern": "useRef"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ç»‘å®š ref",
          "pattern": "ref=\\{bottomRef\\}"
        }
      ]
    },
    {
      "id": "refs-6",
      "title": "Ref å›è°ƒ",
      "difficulty": "hard",
      "tags": ["useRef", "å›è°ƒ"],
      "estimatedTime": 8,
      "question": "ä½¿ç”¨ ref å›è°ƒå‡½æ•°æµ‹é‡å…ƒç´ å°ºå¯¸",
      "description": "ref å¯ä»¥ä¼ å…¥å›è°ƒå‡½æ•°ï¼Œå…ƒç´ æŒ‚è½½æ—¶è°ƒç”¨ã€‚",
      "starterCode": "function App() {\n  const [height, setHeight] = useState(0)\n\n  const measureRef = (node) => {\n    // node æ˜¯ DOM å…ƒç´ \n    // è·å–å¹¶è®¾ç½®é«˜åº¦\n  }\n\n  return (\n    <div>\n      <div ref={measureRef} style={{ padding: '20px', background: '#f0f0f0' }}>\n        è¿™ä¸ª div çš„é«˜åº¦æ˜¯å¤šå°‘ï¼Ÿ\n      </div>\n      <p>é«˜åº¦: {height}px</p>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function App() {\n  const [height, setHeight] = useState(0)\n\n  const measureRef = (node) => {\n    if (node) {\n      setHeight(node.getBoundingClientRect().height)\n    }\n  }\n\n  return (\n    <div>\n      <div ref={measureRef} style={{ padding: '20px', background: '#f0f0f0' }}>\n        è¿™ä¸ª div çš„é«˜åº¦æ˜¯å¤šå°‘ï¼Ÿ\n      </div>\n      <p>é«˜åº¦: {height}px</p>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "ref å¯ä»¥ä¼ å…¥å‡½æ•°",
        "node.getBoundingClientRect().height",
        "æ£€æŸ¥ node æ˜¯å¦å­˜åœ¨"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ measureRef å‡½æ•°",
          "pattern": "measureRef\\s*="
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ä½¿ç”¨ getBoundingClientRect",
          "pattern": "getBoundingClientRect"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥è®¾ç½® height",
          "pattern": "setHeight"
        }
      ]
    }
  ]
}
