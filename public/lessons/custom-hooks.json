{
  "categoryId": "custom-hooks",
  "name": "è‡ªå®šä¹‰ Hook",
  "description": "å­¦ä¹ åˆ›å»ºå’Œä½¿ç”¨è‡ªå®šä¹‰ Hook å¤ç”¨é€»è¾‘",
  "icon": "ğŸ”§",
  "order": 12,
  "lessons": [
    {
      "id": "custom-hooks-1",
      "title": "åˆ›å»ºåŸºç¡€ Hook",
      "difficulty": "medium",
      "tags": ["è‡ªå®šä¹‰Hook", "åŸºç¡€"],
      "estimatedTime": 7,
      "question": "åˆ›å»º useCounter Hook å°è£…è®¡æ•°å™¨é€»è¾‘",
      "description": "è‡ªå®šä¹‰ Hook æ˜¯ä»¥ use å¼€å¤´çš„å‡½æ•°ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»– Hookã€‚",
      "starterCode": "function useCounter(initialValue = 0) {\n  // åˆ›å»º count çŠ¶æ€\n  // åˆ›å»º increment å‡½æ•°\n  // åˆ›å»º decrement å‡½æ•°\n  // è¿”å› { count, increment, decrement }\n}\n\nfunction App() {\n  const { count, increment, decrement } = useCounter(0)\n\n  return (\n    <div>\n      <p>è®¡æ•°: {count}</p>\n      <button onClick={increment}>+</button>\n      <button onClick={decrement}>-</button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function useCounter(initialValue = 0) {\n  const [count, setCount] = useState(initialValue)\n\n  const increment = () => setCount(c => c + 1)\n  const decrement = () => setCount(c => c - 1)\n\n  return { count, increment, decrement }\n}\n\nfunction App() {\n  const { count, increment, decrement } = useCounter(0)\n\n  return (\n    <div>\n      <p>è®¡æ•°: {count}</p>\n      <button onClick={increment}>+</button>\n      <button onClick={decrement}>-</button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "Hook å‡½æ•°ä»¥ use å¼€å¤´",
        "å†…éƒ¨ä½¿ç”¨ useState",
        "è¿”å›å¯¹è±¡åŒ…å«çŠ¶æ€å’Œæ–¹æ³•"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ useCounter",
          "pattern": "function useCounter"
        },
        {
          "type": "ast",
          "description": "åº”è¯¥ä½¿ç”¨ useState",
          "checker": "usesUseState"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥è¿”å›å¯¹è±¡",
          "pattern": "return\\s*\\{"
        }
      ]
    },
    {
      "id": "custom-hooks-2",
      "title": "useToggle Hook",
      "difficulty": "easy",
      "tags": ["è‡ªå®šä¹‰Hook", "å¸ƒå°”å€¼"],
      "estimatedTime": 6,
      "question": "åˆ›å»º useToggle Hook å¤„ç†å¸ƒå°”å€¼åˆ‡æ¢",
      "description": "å°è£…å¸¸è§çš„å¸ƒå°”å€¼åˆ‡æ¢é€»è¾‘ã€‚",
      "starterCode": "function useToggle(initialValue = false) {\n  // åˆ›å»ºå¸ƒå°”çŠ¶æ€\n  // åˆ›å»º toggle å‡½æ•°åˆ‡æ¢å€¼\n  // è¿”å› [value, toggle]\n}\n\nfunction App() {\n  const [visible, toggleVisible] = useToggle(false)\n\n  return (\n    <div>\n      <button onClick={toggleVisible}>\n        {visible ? 'éšè—' : 'æ˜¾ç¤º'}\n      </button>\n      {visible && <p>å†…å®¹å·²æ˜¾ç¤º</p>}\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function useToggle(initialValue = false) {\n  const [value, setValue] = useState(initialValue)\n  const toggle = () => setValue(v => !v)\n  return [value, toggle]\n}\n\nfunction App() {\n  const [visible, toggleVisible] = useToggle(false)\n\n  return (\n    <div>\n      <button onClick={toggleVisible}>\n        {visible ? 'éšè—' : 'æ˜¾ç¤º'}\n      </button>\n      {visible && <p>å†…å®¹å·²æ˜¾ç¤º</p>}\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "è¿”å›æ•°ç»„ [value, toggle]",
        "toggle å‡½æ•°: () => setValue(v => !v)",
        "ç±»ä¼¼ useState çš„ç”¨æ³•"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ useToggle",
          "pattern": "function useToggle"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥è¿”å›æ•°ç»„",
          "pattern": "return\\s*\\["
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥æœ‰ toggle å‡½æ•°",
          "pattern": "toggle"
        }
      ]
    },
    {
      "id": "custom-hooks-3",
      "title": "useLocalStorage Hook",
      "difficulty": "hard",
      "tags": ["è‡ªå®šä¹‰Hook", "localStorage"],
      "estimatedTime": 9,
      "question": "åˆ›å»º useLocalStorage Hook åŒæ­¥çŠ¶æ€åˆ° localStorage",
      "description": "å°è£… localStorage çš„è¯»å†™é€»è¾‘ã€‚",
      "starterCode": "function useLocalStorage(key, initialValue) {\n  // ä» localStorage è¯»å–åˆå§‹å€¼\n  // åˆ›å»ºçŠ¶æ€\n  // åˆ›å»º setValue å‡½æ•°ï¼ŒåŒæ—¶æ›´æ–° state å’Œ localStorage\n  // è¿”å› [value, setValue]\n}\n\nfunction App() {\n  const [name, setName] = useLocalStorage('name', '')\n\n  return (\n    <div>\n      <input \n        value={name}\n        onChange={e => setName(e.target.value)}\n        placeholder=\"è¾“å…¥å§“å\"\n      />\n      <p>ä¿å­˜çš„å§“å: {name}</p>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function useLocalStorage(key, initialValue) {\n  const [value, setValue] = useState(() => {\n    const saved = localStorage.getItem(key)\n    return saved !== null ? JSON.parse(saved) : initialValue\n  })\n\n  const setStoredValue = (newValue) => {\n    setValue(newValue)\n    localStorage.setItem(key, JSON.stringify(newValue))\n  }\n\n  return [value, setStoredValue]\n}\n\nfunction App() {\n  const [name, setName] = useLocalStorage('name', '')\n\n  return (\n    <div>\n      <input \n        value={name}\n        onChange={e => setName(e.target.value)}\n        placeholder=\"è¾“å…¥å§“å\"\n      />\n      <p>ä¿å­˜çš„å§“å: {name}</p>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "åˆå§‹åŒ–æ—¶è¯»å– localStorage",
        "æ›´æ–°æ—¶åŒæ­¥åˆ° localStorage",
        "ä½¿ç”¨ JSON.parse å’Œ JSON.stringify"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ useLocalStorage",
          "pattern": "function useLocalStorage"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥è®¿é—® localStorage",
          "pattern": "localStorage"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥è¿”å›æ•°ç»„",
          "pattern": "return\\s*\\["
        }
      ]
    },
    {
      "id": "custom-hooks-4",
      "title": "useDebounce Hook",
      "difficulty": "hard",
      "tags": ["è‡ªå®šä¹‰Hook", "é˜²æŠ–"],
      "estimatedTime": 9,
      "question": "åˆ›å»º useDebounce Hook å®ç°é˜²æŠ–",
      "description": "å»¶è¿Ÿæ›´æ–°å€¼ï¼Œå¸¸ç”¨äºæœç´¢è¾“å…¥ã€‚",
      "starterCode": "function useDebounce(value, delay) {\n  // åˆ›å»º debouncedValue çŠ¶æ€\n  // ä½¿ç”¨ useEffect è®¾ç½®å®šæ—¶å™¨\n  // delay æ¯«ç§’åæ›´æ–° debouncedValue\n  // æ¸…ç†å®šæ—¶å™¨\n  // è¿”å› debouncedValue\n}\n\nfunction App() {\n  const [text, setText] = useState('')\n  const debouncedText = useDebounce(text, 500)\n\n  return (\n    <div>\n      <input \n        value={text}\n        onChange={e => setText(e.target.value)}\n      />\n      <p>å®æ—¶: {text}</p>\n      <p>é˜²æŠ–: {debouncedText}</p>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n\n    return () => clearTimeout(timer)\n  }, [value, delay])\n\n  return debouncedValue\n}\n\nfunction App() {\n  const [text, setText] = useState('')\n  const debouncedText = useDebounce(text, 500)\n\n  return (\n    <div>\n      <input \n        value={text}\n        onChange={e => setText(e.target.value)}\n      />\n      <p>å®æ—¶: {text}</p>\n      <p>é˜²æŠ–: {debouncedText}</p>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "useEffect ä¸­è®¾ç½® setTimeout",
        "ä¾èµ– value å’Œ delay",
        "è¿”å›æ¸…ç†å‡½æ•° clearTimeout"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ useDebounce",
          "pattern": "function useDebounce"
        },
        {
          "type": "ast",
          "description": "åº”è¯¥ä½¿ç”¨ useEffect",
          "checker": "usesUseEffect"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ä½¿ç”¨ setTimeout",
          "pattern": "setTimeout"
        }
      ]
    },
    {
      "id": "custom-hooks-5",
      "title": "useWindowSize Hook",
      "difficulty": "medium",
      "tags": ["è‡ªå®šä¹‰Hook", "çª—å£"],
      "estimatedTime": 7,
      "question": "åˆ›å»º useWindowSize Hook è·å–çª—å£å°ºå¯¸",
      "description": "ç›‘å¬çª—å£ resize äº‹ä»¶ï¼Œè¿”å›å½“å‰å°ºå¯¸ã€‚",
      "starterCode": "function useWindowSize() {\n  // åˆ›å»º size çŠ¶æ€ { width, height }\n  // useEffect ç›‘å¬ resize äº‹ä»¶\n  // æ›´æ–° size\n  // æ¸…ç†äº‹ä»¶ç›‘å¬\n  // è¿”å› size\n}\n\nfunction App() {\n  const { width, height } = useWindowSize()\n\n  return (\n    <div>\n      <p>å®½åº¦: {width}px</p>\n      <p>é«˜åº¦: {height}px</p>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function useWindowSize() {\n  const [size, setSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  })\n\n  useEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      })\n    }\n\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return size\n}\n\nfunction App() {\n  const { width, height } = useWindowSize()\n\n  return (\n    <div>\n      <p>å®½åº¦: {width}px</p>\n      <p>é«˜åº¦: {height}px</p>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "åˆå§‹å€¼: window.innerWidth/innerHeight",
        "addEventListener('resize', ...)",
        "æ¸…ç†: removeEventListener"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ useWindowSize",
          "pattern": "function useWindowSize"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ç›‘å¬ resize",
          "pattern": "addEventListener.*resize|resize.*addEventListener"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥è¿”å›å¯¹è±¡",
          "pattern": "return\\s+size|return\\s*\\{"
        }
      ]
    },
    {
      "id": "custom-hooks-6",
      "title": "usePrevious Hook",
      "difficulty": "medium",
      "tags": ["è‡ªå®šä¹‰Hook", "ref"],
      "estimatedTime": 7,
      "question": "åˆ›å»º usePrevious Hook è·å–å‰ä¸€ä¸ªå€¼",
      "description": "ä½¿ç”¨ useRef ä¿å­˜ä¸Šä¸€æ¬¡çš„å€¼ã€‚",
      "starterCode": "function usePrevious(value) {\n  // ä½¿ç”¨ useRef ä¿å­˜å€¼\n  // useEffect ä¸­æ›´æ–° ref\n  // è¿”å› ref.current\n}\n\nfunction App() {\n  const [count, setCount] = useState(0)\n  const prevCount = usePrevious(count)\n\n  return (\n    <div>\n      <p>å½“å‰: {count}</p>\n      <p>ä¹‹å‰: {prevCount}</p>\n      <button onClick={() => setCount(count + 1)}>å¢åŠ </button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function usePrevious(value) {\n  const ref = useRef()\n\n  useEffect(() => {\n    ref.current = value\n  })\n\n  return ref.current\n}\n\nfunction App() {\n  const [count, setCount] = useState(0)\n  const prevCount = usePrevious(count)\n\n  return (\n    <div>\n      <p>å½“å‰: {count}</p>\n      <p>ä¹‹å‰: {prevCount}</p>\n      <button onClick={() => setCount(count + 1)}>å¢åŠ </button>\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "useRef ä¿å­˜å€¼",
        "useEffect æ— ä¾èµ–æ•°ç»„",
        "æ¯æ¬¡æ¸²æŸ“åæ›´æ–° ref"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ usePrevious",
          "pattern": "function usePrevious"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ä½¿ç”¨ useRef",
          "pattern": "useRef"
        },
        {
          "type": "ast",
          "description": "åº”è¯¥ä½¿ç”¨ useEffect",
          "checker": "usesUseEffect"
        }
      ]
    },
    {
      "id": "custom-hooks-7",
      "title": "useOnClickOutside Hook",
      "difficulty": "hard",
      "tags": ["è‡ªå®šä¹‰Hook", "äº‹ä»¶"],
      "estimatedTime": 9,
      "question": "åˆ›å»º useOnClickOutside Hook æ£€æµ‹å¤–éƒ¨ç‚¹å‡»",
      "description": "ç‚¹å‡»å…ƒç´ å¤–éƒ¨æ—¶è§¦å‘å›è°ƒï¼Œå¸¸ç”¨äºå…³é—­å¼¹çª—ã€‚",
      "starterCode": "function useOnClickOutside(ref, handler) {\n  // useEffect ç›‘å¬ mousedown äº‹ä»¶\n  // åˆ¤æ–­ç‚¹å‡»æ˜¯å¦åœ¨ ref å…ƒç´ å¤–éƒ¨\n  // æ˜¯åˆ™è°ƒç”¨ handler\n  // æ¸…ç†äº‹ä»¶ç›‘å¬\n}\n\nfunction App() {\n  const [visible, setVisible] = useState(false)\n  const boxRef = useRef(null)\n\n  useOnClickOutside(boxRef, () => setVisible(false))\n\n  return (\n    <div>\n      <button onClick={() => setVisible(true)}>æ‰“å¼€</button>\n      {visible && (\n        <div \n          ref={boxRef}\n          style={{ padding: '20px', background: '#f0f0f0' }}\n        >\n          ç‚¹å‡»å¤–éƒ¨å…³é—­\n        </div>\n      )}\n    </div>\n  )\n}\n\nrender(<App />)",
      "solution": "function useOnClickOutside(ref, handler) {\n  useEffect(() => {\n    const listener = (event) => {\n      if (!ref.current || ref.current.contains(event.target)) {\n        return\n      }\n      handler(event)\n    }\n\n    document.addEventListener('mousedown', listener)\n    return () => document.removeEventListener('mousedown', listener)\n  }, [ref, handler])\n}\n\nfunction App() {\n  const [visible, setVisible] = useState(false)\n  const boxRef = useRef(null)\n\n  useOnClickOutside(boxRef, () => setVisible(false))\n\n  return (\n    <div>\n      <button onClick={() => setVisible(true)}>æ‰“å¼€</button>\n      {visible && (\n        <div \n          ref={boxRef}\n          style={{ padding: '20px', background: '#f0f0f0' }}\n        >\n          ç‚¹å‡»å¤–éƒ¨å…³é—­\n        </div>\n      )}\n    </div>\n  )\n}\n\nrender(<App />)",
      "hints": [
        "ç›‘å¬ document çš„ mousedown",
        "ref.current.contains(event.target) åˆ¤æ–­",
        "ä¸åœ¨å†…éƒ¨åˆ™è°ƒç”¨ handler"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ useOnClickOutside",
          "pattern": "function useOnClickOutside"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥ç›‘å¬äº‹ä»¶",
          "pattern": "addEventListener"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥åˆ¤æ–­ contains",
          "pattern": "contains"
        }
      ]
    },
    {
      "id": "custom-hooks-8",
      "title": "ç»„åˆå¤šä¸ª Hook",
      "difficulty": "hard",
      "tags": ["è‡ªå®šä¹‰Hook", "ç»„åˆ"],
      "estimatedTime": 10,
      "question": "åˆ›å»º useFetch Hook ç»„åˆå¤šä¸ª Hook",
      "description": "ç»„åˆ useStateã€useEffect å®ç°æ•°æ®è·å–ã€‚",
      "starterCode": "function useFetch(url) {\n  // åˆ›å»º dataã€loadingã€error çŠ¶æ€\n  // useEffect ä¸­è·å–æ•°æ®\n  // æ¨¡æ‹Ÿ fetch: setTimeout\n  // è¿”å› { data, loading, error }\n}\n\nfunction App() {\n  const { data, loading, error } = useFetch('/api/user')\n\n  if (loading) return <div>åŠ è½½ä¸­...</div>\n  if (error) return <div>é”™è¯¯: {error}</div>\n  return <div>æ•°æ®: {data}</div>\n}\n\nrender(<App />)",
      "solution": "function useFetch(url) {\n  const [data, setData] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    setLoading(true)\n    setTimeout(() => {\n      setData('æ¨¡æ‹Ÿæ•°æ®')\n      setLoading(false)\n    }, 1000)\n  }, [url])\n\n  return { data, loading, error }\n}\n\nfunction App() {\n  const { data, loading, error } = useFetch('/api/user')\n\n  if (loading) return <div>åŠ è½½ä¸­...</div>\n  if (error) return <div>é”™è¯¯: {error}</div>\n  return <div>æ•°æ®: {data}</div>\n}\n\nrender(<App />)",
      "hints": [
        "ä¸‰ä¸ªçŠ¶æ€: dataã€loadingã€error",
        "useEffect ä¾èµ– url",
        "è¿”å›å¯¹è±¡åŒ…å«æ‰€æœ‰çŠ¶æ€"
      ],
      "testCases": [
        {
          "type": "pattern",
          "description": "åº”è¯¥å®šä¹‰ useFetch",
          "pattern": "function useFetch"
        },
        {
          "type": "pattern",
          "description": "åº”è¯¥æœ‰ä¸‰ä¸ª useState",
          "pattern": "useState",
          "minCount": 3
        },
        {
          "type": "ast",
          "description": "åº”è¯¥ä½¿ç”¨ useEffect",
          "checker": "usesUseEffect"
        }
      ]
    }
  ]
}
